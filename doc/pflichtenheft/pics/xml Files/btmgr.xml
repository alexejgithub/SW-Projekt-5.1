<diagram program="umletino" version="14.2"><zoom_level>10</zoom_level><element><id>UMLState</id><coordinates><x>1327</x><y>70</y><w>510</w><h>70</h></coordinates><panel_attributes>Connecting
--
BluetoothGatt a = device.conectGatt(Context con, bool autoCon, BluetoothGattCallback bgc);

valign=top
</panel_attributes><additional_attributes></additional_attributes></element><element><id>UMLState</id><coordinates><x>1177</x><y>420</y><w>180</w><h>110</h></coordinates><panel_attributes>Idle
--
void waitforinput();
void exit();
-.
valign=top
</panel_attributes><additional_attributes></additional_attributes></element><element><id>UMLState</id><coordinates><x>947</x><y>130</y><w>320</w><h>120</h></coordinates><panel_attributes>Scanning
--
- android.bluetooth.le.ScanCallback{
void	onBatchScanResults(List&lt;ScanResult&gt; results)
void	onScanFailed(int errorCode)
void	onScanResult(int callbackType, ScanResult result)
}
valign=top
</panel_attributes><additional_attributes></additional_attributes></element><element><id>UMLState</id><coordinates><x>757</x><y>600</y><w>180</w><h>110</h></coordinates><panel_attributes>Off
--

exit();
valign=top
</panel_attributes><additional_attributes></additional_attributes></element><element><id>UMLState</id><coordinates><x>357</x><y>260</y><w>290</w><h>110</h></coordinates><panel_attributes>Unknown
--
init(){
android.bluetooth.BluetoothManager.getAdapter();
android.bluetooth.BluetoothAdapter.isEnabled();
}

valign=top
</panel_attributes><additional_attributes></additional_attributes></element><element><id>UMLState</id><coordinates><x>1657</x><y>170</y><w>480</w><h>240</h></coordinates><panel_attributes>Connected
--
public abstract class BluetoothGattCallback{
void	onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic)
sendUpdate(BtManUpdate btup );
void	onCharacteristicRead(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status)
void	onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status)
void	onConnectionStateChange(BluetoothGatt gatt, int status, int newState)
BluetoothGattService discoverServices(UUID[] uuids);
void	onDescriptorRead(BluetoothGatt gatt, BluetoothGattDescriptor descriptor, int status)
void	onDescriptorWrite(BluetoothGatt gatt, BluetoothGattDescriptor descriptor, int status)
void	onMtuChanged(BluetoothGatt gatt, int mtu, int status)
void	onReadRemoteRssi(BluetoothGatt gatt, int rssi, int status)
void	onReliableWriteCompleted(BluetoothGatt gatt, int status)
void	onServicesDiscovered(BluetoothGatt gatt, int status)
}


valign=top
</panel_attributes><additional_attributes></additional_attributes></element><element><id>Relation</id><coordinates><x>637</x><y>170</y><w>330</w><h>150</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;130;310;10</additional_attributes></element><element><id>Relation</id><coordinates><x>397</x><y>180</y><w>90</w><h>100</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>70;80;50;10;10;80</additional_attributes></element><element><id>Relation</id><coordinates><x>567</x><y>360</y><w>240</w><h>120</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;10;220;100</additional_attributes></element><element><id>Relation</id><coordinates><x>1257</x><y>130</y><w>90</w><h>70</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;50;70;10</additional_attributes></element><element><id>Relation</id><coordinates><x>1727</x><y>130</y><w>30</w><h>60</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;10;10;40</additional_attributes></element><element><id>Relation</id><coordinates><x>1347</x><y>130</y><w>310</w><h>310</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>290;10;10;290</additional_attributes></element><element><id>Relation</id><coordinates><x>1347</x><y>390</y><w>330</w><h>110</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>310;10;10;90</additional_attributes></element><element><id>Relation</id><coordinates><x>1177</x><y>240</y><w>40</w><h>200</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;10;20;180</additional_attributes></element><element><id>Relation</id><coordinates><x>1197</x><y>240</y><w>30</w><h>200</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;180;10;10</additional_attributes></element><element><id>UMLSpecialState</id><coordinates><x>787</x><y>430</y><w>120</w><h>60</h></coordinates><panel_attributes>type=decision

</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>817</x><y>450</y><w>80</w><h>30</h></coordinates><panel_attributes>turn it on?
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>387</x><y>140</y><w>100</w><h>70</h></coordinates><panel_attributes>Bluetooth Adapter not available
//android.bluetooth.BluetoothManager.getAdapter() == null
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>617</x><y>420</y><w>90</w><h>20</h></coordinates><panel_attributes>Bluetooth Off
//android.bluetooth.BluetoothAdapter.isEnabled() == false
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>687</x><y>210</y><w>100</w><h>50</h></coordinates><panel_attributes>Bluetooth on and ready
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Relation</id><coordinates><x>837</x><y>240</y><w>140</w><h>210</h></coordinates><panel_attributes>lt=&lt;-</panel_attributes><additional_attributes>120;10;10;190</additional_attributes></element><element><id>Relation</id><coordinates><x>827</x><y>480</y><w>40</w><h>140</h></coordinates><panel_attributes>lt=&lt;-</panel_attributes><additional_attributes>10;120;20;10</additional_attributes></element><element><id>Text</id><coordinates><x>857</x><y>310</y><w>100</w><h>70</h></coordinates><panel_attributes>yes
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>857</x><y>500</y><w>100</w><h>70</h></coordinates><panel_attributes>no
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>1227</x><y>100</y><w>110</w><h>70</h></coordinates><panel_attributes>onScanResult()
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>1457</x><y>260</y><w>100</w><h>70</h></coordinates><panel_attributes>Error
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>1217</x><y>310</y><w>100</w><h>70</h></coordinates><panel_attributes>startScan
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>1097</x><y>320</y><w>100</w><h>70</h></coordinates><panel_attributes>no results
scan aborted
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>1887</x><y>110</y><w>100</w><h>30</h></coordinates><panel_attributes>success
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>1487</x><y>440</y><w>210</w><h>40</h></coordinates><panel_attributes>Connection lost or ended by user
//onConnectionStateChanged
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element><element><id>Relation</id><coordinates><x>927</x><y>660</y><w>320</w><h>30</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;10;300;10</additional_attributes></element><element><id>Relation</id><coordinates><x>1217</x><y>520</y><w>50</w><h>170</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>30;10;10;150</additional_attributes></element><element><id>UMLSpecialState</id><coordinates><x>527</x><y>160</y><w>20</w><h>20</h></coordinates><panel_attributes>type=initial</panel_attributes><additional_attributes></additional_attributes></element><element><id>Relation</id><coordinates><x>527</x><y>160</y><w>40</w><h>120</h></coordinates><panel_attributes>lt=-&gt;</panel_attributes><additional_attributes>10;10;20;100</additional_attributes></element><element><id>UMLSpecialState</id><coordinates><x>1217</x><y>660</y><w>20</w><h>20</h></coordinates><panel_attributes>type=flow_final</panel_attributes><additional_attributes></additional_attributes></element><element><id>Text</id><coordinates><x>1027</x><y>610</y><w>210</w><h>40</h></coordinates><panel_attributes>user ends the app
style=wordwrap</panel_attributes><additional_attributes></additional_attributes></element></diagram>